### Hexlet tests and linter status:
[![Actions Status](https://github.com/mikheyev9/python-django-developer-project-52/actions/workflows/hexlet-check.yml/badge.svg)](https://github.com/mikheyev9/python-django-developer-project-52/actions)

Django Project in Docker with Nginx

Это Django-проект, который запускается внутри контейнера с использованием Docker Compose. В проекте используется Nginx для обработки запросов по HTTP, и он проксирует запросы к Django через Gunicorn.
Настройка внешнего Nginx для HTTPS

На сервере необходимо установить внешний Nginx, который будет принимать запросы по HTTPS и проксировать их на Nginx, запущенный внутри Docker, на порту 8080.
Шаги:

    Настройте внешний Nginx для обработки HTTPS-запросов с помощью Certbot или другого инструмента для получения SSL-сертификатов.

    Настройте внешний Nginx для проксирования запросов на внутренний Nginx, который слушает порт 8080 (в Docker-контейнере).



Шаги по установке и запуску
1. Настройка директорий

Для создания необходимых директорий на сервере (для статических файлов, медиа и логов) нужно выполнить команду:

bash

    make setup-directories

Makefile содержит следующие задачи:


Что происходит:

    Создаются директории:
        /var/www/project/static — для статических файлов.
        /var/www/project/media — для загруженных файлов (медиа).
        /var/www/project/logs — для логов Nginx и приложения.

    Назначаются права:
        Владельцем и группой директорий становится текущий пользователь ($(USER_NAME)).
        Выдаются права на чтение и запись для владельца и группы, а также только на чтение для других пользователей.

    Пользователь добавляется в группу www-data:
        Это делается для того, чтобы текущий пользователь мог иметь доступ к логам и статическим файлам, так как Nginx работает от имени пользователя www-data.

2. Заполнение файла .env

Создайте файл .env и заполните его следующими значениями.


Что означают эти переменные:

    POSTGRES_DB: Имя базы данных для Django.

    POSTGRES_USER: Имя пользователя PostgreSQL для подключения к базе данных.

    POSTGRES_PASSWORD: Пароль для подключения к базе данных PostgreSQL.

    DATABASE_URL: URL подключения к базе данных в формате PostgreSQL, используемый Django для подключения к базе данных.

    DJANGO_SECRET_KEY: Секретный ключ Django. Замените your_secret_key_here на ваш уникальный ключ.

    DJANGO_DEBUG: Включает режим отладки (True — в режиме разработки).

    ALLOWED_HOSTS: Список доменов или IP-адресов, с которых Django разрешает принимать запросы (например, yourdomain.com).

    SERVER_HOST: Адрес хоста, который используется для внутреннего Nginx в Docker (можно оставить localhost для локальных тестов).

3. Запуск Docker Compose

После того как все настройки сделаны, можно запустить проект с помощью Docker Compose:



    docker-compose up --build -d

Эта команда:

    Соберёт Docker-образы для вашего Django-приложения и Nginx.
    Запустит контейнеры с PostgreSQL, Django и Nginx.
    Приложение будет доступно по адресу, указанному в конфигурации Nginx (внешнем), который проксирует запросы на внутренний Nginx в Docker.

Заключение

Теперь ваше Django-приложение запущено в Docker и готово принимать запросы через Nginx. Внешний Nginx проксирует запросы через HTTPS на внутренний Nginx, работающий на порту 8080 в Docker. Статические и медиа-файлы, а также логи сохраняются в директориях на сервере.